<section class="contact-form">
  @if (showSuccess) {
    <div class="success-message">
      {{ "contact_us.contact_form.success_message" | translate }}
    </div>
  }
  <h2>{{ "contact_us.contact_form.title" | translate }}</h2>
  <h3>{{ "contact_us.contact_form.subtitle" | translate }}</h3>
  <p>{{ "contact_us.contact_form.description" | translate }}</p>

  <form
    class="contact-form-container"
    [formGroup]="contactForm"
    (ngSubmit)="onSubmit()"
  >
    <!-- Honeypot field -->
    <div class="hidden">
      <input type="text" formControlName="website" autocomplete="off" />
    </div>

    <div class="form-group">
      <label for="name">{{ "contact_us.contact_form.name" | translate }}</label>
      <input type="text" id="name" formControlName="name" maxlength="50" />
      @if (contactForm.get('name')?.errors?.['maxlength'] && submitted) {
        <div class="error">
          {{ "contact_us.contact_form.name_too_long" | translate }}
        </div>
      }
    </div>

    <div class="form-group">
      <label for="surname">{{ "contact_us.contact_form.surname" | translate }}</label>
      <input type="text" id="surname" formControlName="surname" maxlength="50" />
      @if (contactForm.get('surname')?.errors?.['maxlength'] && submitted) {
        <div class="error">
          {{ "contact_us.contact_form.surname_too_long" | translate }}
        </div>
      }
    </div>

    <div class="form-group">
      <label for="phone">{{ "contact_us.contact_form.phone" | translate }}</label>
      <input type="tel" id="phone" formControlName="phone" placeholder="+39 123 456 7890" />
      @if (contactForm.get('phone')?.errors?.['pattern'] && submitted) {
        <div class="error">
          {{ "contact_us.contact_form.phone_invalid" | translate }}
        </div>
      }
    </div>

    <div class="form-group">
      <label for="email">{{ "contact_us.contact_form.email" | translate }} *</label>
      <input type="email" id="email" formControlName="email" required />
      @if (contactForm.get('email')?.errors?.['required'] && submitted) {
        <div class="error">
          {{ "contact_us.contact_form.email_required" | translate }}
        </div>
      }
      @if (contactForm.get('email')?.errors?.['email'] && submitted) {
        <div class="error">
          {{ "contact_us.contact_form.email_invalid" | translate }}
        </div>
      }
    </div>

    <div class="form-group">
      <label for="message">{{ "contact_us.contact_form.message" | translate }} *</label>
      <textarea id="message" formControlName="message" rows="5" required></textarea>
      <div class="char-count">
        {{ contactForm.get('message')?.value?.length || 0 }}/{{ maxMessageLength }}
      </div>
      @if (contactForm.get('message')?.errors?.['required'] && submitted) {
        <div class="error">
          {{ "contact_us.contact_form.message_required" | translate }}
        </div>
      }
      @if (contactForm.get('message')?.errors?.['maxlength'] && submitted) {
        <div class="error">
          {{ "contact_us.contact_form.message_too_long" | translate }}
        </div>
      }
    </div>

    <div class="form-group checkbox">
      <input type="checkbox" id="privacy" formControlName="privacyConsent" />
      <label for="privacy" class="privacy-consent-label">
        {{ "contact_us.contact_form.privacy_consent" | translate }}
        <a href="/privacy-policy" target="_blank">{{ "contact_us.contact_form.privacy_policy" | translate }}</a>
      </label>
      @if (contactForm.get('privacyConsent')?.errors?.['required'] && submitted) {
        <div class="error">
          {{ "contact_us.contact_form.privacy_required" | translate }}
        </div>
      }
    </div>

    <button class="btn" type="submit" [disabled]="contactForm.invalid">
      {{ "contact_us.contact_form.submit" | translate }}
    </button>
  </form>
</section>
