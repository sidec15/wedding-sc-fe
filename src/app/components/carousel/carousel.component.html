<div class="carousel" #carousel>
  <ng-container *ngFor="let slide of activeSlides">
    <img
      [src]="slide.imageUrl"
      alt="Slide Image"
      class="slide"
      [ngStyle]="slide.style"
      [@fadeSlide]="slide.visible ? 'visible' : 'hidden'"
    />

    <div
      class="overlay"
      [@fadeSlide]="slide.visible ? 'visible' : 'hidden'"
      [class.expanded]="expanded"
      #overlayRef
    >
      <h3>{{ slide.title | translate }}</h3>
      <p>{{ slide.description | translate }}</p>

      <div class="button-container">
        <button
          class="show-btn more-btn"
          *ngIf="shouldShowMore && !expanded"
          (click)="toggleExpandedState(true)"
        >
          Show more
        </button>

        <button
          class="show-btn less-btn"
          *ngIf="shouldShowMore && expanded"
          (click)="toggleExpandedState(false)"
        >
          Show less
        </button>
      </div>
    </div>
  </ng-container>

  <!-- This is now outside the ngFor and always rendered -->
  <div class="progress-bar-container">
    <div class="progress-bar" [style.width.%]="progress"></div>
  </div>

  <div class="gallery-buttons">
    <button class="prev-btn" (click)="prevSlide()">
      <i class="fas fa-chevron-left"></i>
    </button>
    <button class="next-btn" (click)="nextSlide()">
      <i class="fas fa-chevron-right"></i>
    </button>
  </div>
</div>
